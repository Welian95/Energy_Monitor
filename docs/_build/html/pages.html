<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pages &mdash; Energy_Monitor 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="System Modules" href="modules/modules.html" />
    <link rel="prev" title="Energy_monitor Documentation" href="modules.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Energy_Monitor
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Energy_monitor Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="modules.html#module-Main">Main</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Pages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="modules/modules.html">System Modules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="functions.html">Functions</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Energy_Monitor</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">Energy_monitor Documentation</a></li>
      <li class="breadcrumb-item active">Pages</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/pages.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-pages.analysis_layer">
<span id="pages"></span><h1>Pages<a class="headerlink" href="#module-pages.analysis_layer" title="Permalink to this heading"></a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="pages.analysis_layer.convert_processed_data">
<span class="sig-prename descclassname"><span class="pre">pages.analysis_layer.</span></span><span class="sig-name descname"><span class="pre">convert_processed_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selected_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pages/analysis_layer.html#convert_processed_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pages.analysis_layer.convert_processed_data" title="Permalink to this definition"></a></dt>
<dd><p>Processes and converts the selected data entered by the user via the Streamlit user interface.</p>
<p>This function performs several tasks:
1. it provides unit conversion for the selected data.
2. it interpolates the data based on a user-specified frequency.
3. it converts energy and power data to a uniform unit, if so specified by the user.</p>
<dl class="simple">
<dt>Parameters:</dt><dd><p>selected_data (dict): A dictionary containing the selected data from different modules.</p>
</dd>
<dt>Returns:</dt><dd><p>processed_data (dict): A dictionary containing the processed and possibly converted data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pages.analysis_layer.convert_to_dataframe">
<span class="sig-prename descclassname"><span class="pre">pages.analysis_layer.</span></span><span class="sig-name descname"><span class="pre">convert_to_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nested_dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pages/analysis_layer.html#convert_to_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pages.analysis_layer.convert_to_dataframe" title="Permalink to this definition"></a></dt>
<dd><p>Converts a nested dictionary to a single-level Pandas DataFrame.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>nested_dict (dict): The nested dictionary containing the data.</p>
</dd>
<dt>Returns:</dt><dd><p>pd.DataFrame: A DataFrame containing the flattened data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pages.analysis_layer.create_bar_figure">
<span class="sig-prename descclassname"><span class="pre">pages.analysis_layer.</span></span><span class="sig-name descname"><span class="pre">create_bar_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selected_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pages/analysis_layer.html#create_bar_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pages.analysis_layer.create_bar_figure" title="Permalink to this definition"></a></dt>
<dd><p>Creates a list of combined plotly bar charts based on the selected data.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>selected_data (dict): A dictionary containing the selected data.
start_date (str or datetime): A string or datetime object indicating the start date.
end_date (str or datetime): A string or datetime object indicating the end date.</p>
</dd>
<dt>Returns:</dt><dd><p>list: A list of plotly figures.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pages.analysis_layer.create_duration_curve_figure">
<span class="sig-prename descclassname"><span class="pre">pages.analysis_layer.</span></span><span class="sig-name descname"><span class="pre">create_duration_curve_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selected_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pages/analysis_layer.html#create_duration_curve_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pages.analysis_layer.create_duration_curve_figure" title="Permalink to this definition"></a></dt>
<dd><p>Creates a list of combined plotly duration curve charts with the x-axis in hours based on the selected data.
The function automatically infers the time frequency from the data index using pd.infer_freq and converts it to minutes.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>selected_data (dict): A dictionary containing the selected data.
start_date (str or datetime): A string or datetime object indicating the start date.
end_date (str or datetime): A string or datetime object indicating the end date.</p>
</dd>
<dt>Returns:</dt><dd><p>list: A list of plotly figures.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pages.analysis_layer.create_heatmap_figure">
<span class="sig-prename descclassname"><span class="pre">pages.analysis_layer.</span></span><span class="sig-name descname"><span class="pre">create_heatmap_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selected_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pages/analysis_layer.html#create_heatmap_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pages.analysis_layer.create_heatmap_figure" title="Permalink to this definition"></a></dt>
<dd><p>Creates a list of plotly heatmap figures based on the selected data. Each data series will have its own figure.
The x-axis represents the date, the y-axis represents the hours of the day, and the color represents the value.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>selected_data (dict): A dictionary containing the selected data.
start_date (str or datetime): A string or datetime object indicating the start date.
end_date (str or datetime): A string or datetime object indicating the end date.</p>
</dd>
<dt>Returns:</dt><dd><p>list: A list of plotly figures.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pages.analysis_layer.create_line_figure">
<span class="sig-prename descclassname"><span class="pre">pages.analysis_layer.</span></span><span class="sig-name descname"><span class="pre">create_line_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selected_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pages/analysis_layer.html#create_line_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pages.analysis_layer.create_line_figure" title="Permalink to this definition"></a></dt>
<dd><p>Creates a list of combined plotly figures based on the selected data.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>selected_data: A dictionary containing the selected data.
start_date: A string or datetime object indicating the start date.
end_date: A string or datetime object indicating the end date.</p>
</dd>
<dt>Returns:</dt><dd><p>A list of plotly figures.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pages.analysis_layer.create_themeriver_figure">
<span class="sig-prename descclassname"><span class="pre">pages.analysis_layer.</span></span><span class="sig-name descname"><span class="pre">create_themeriver_figure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selected_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pages/analysis_layer.html#create_themeriver_figure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pages.analysis_layer.create_themeriver_figure" title="Permalink to this definition"></a></dt>
<dd><p>Creates a list of plotly ThemeRiver figures based on the selected data.
Each figure represents a group of data series with the same unit.
The y-values of the series are summed up to create the ‘river’ shape.
The hover mode is customized to only show the sum of the river.
The fill between lines is also implemented to represent the stacked nature of the series.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>selected_data (dict): A dictionary containing the selected data.
start_date (str or datetime): A string or datetime object indicating the start date.
end_date (str or datetime): A string or datetime object indicating the end date.</p>
</dd>
<dt>Returns:</dt><dd><p>list: A list of plotly figures.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pages.analysis_layer.date_range_selector">
<span class="sig-prename descclassname"><span class="pre">pages.analysis_layer.</span></span><span class="sig-name descname"><span class="pre">date_range_selector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">date</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">date</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pages/analysis_layer.html#date_range_selector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pages.analysis_layer.date_range_selector" title="Permalink to this definition"></a></dt>
<dd><p>Display a date range selector UI using Streamlit and return the selected date range.</p>
<p>Parameters:
- start_date (dt.date): The earliest selectable date.
- end_date (dt.date): The latest selectable date.</p>
<p>Returns:
- tuple: A tuple containing the selected start and end dates (dt.date, dt.date).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pages.analysis_layer.extract_unit">
<span class="sig-prename descclassname"><span class="pre">pages.analysis_layer.</span></span><span class="sig-name descname"><span class="pre">extract_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pages/analysis_layer.html#extract_unit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pages.analysis_layer.extract_unit" title="Permalink to this definition"></a></dt>
<dd><p>Extract the unit from a column name enclosed in square brackets.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>column_name (str): The name of the column, e.g., “Temperature [C]”</p>
</dd>
<dt>Returns:</dt><dd><p>str: The unit extracted from the column name, e.g., “C”</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pages.analysis_layer.get_selected_data">
<span class="sig-prename descclassname"><span class="pre">pages.analysis_layer.</span></span><span class="sig-name descname"><span class="pre">get_selected_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_mapping</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_time</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pages/analysis_layer.html#get_selected_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pages.analysis_layer.get_selected_data" title="Permalink to this definition"></a></dt>
<dd><p>Process selected data based on user input from the Streamlit sidebar.</p>
<p>Parameters:
- data_mapping (dict): A mapping of module names to data names and column names.
- start_time (datetime): The start time for data filtering.
- end_time (datetime): The end time for data filtering.</p>
<p>Returns:
- selected_data (dict): A dictionary containing the selected data.</p>
</dd></dl>

<span class="target" id="module-pages.presentation_display"></span><dl class="py function">
<dt class="sig sig-object py" id="pages.presentation_display.transform_data_for_sankey">
<span class="sig-prename descclassname"><span class="pre">pages.presentation_display.</span></span><span class="sig-name descname"><span class="pre">transform_data_for_sankey</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sankey_mapping</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span></span></span><a class="reference internal" href="_modules/pages/presentation_display.html#transform_data_for_sankey"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pages.presentation_display.transform_data_for_sankey" title="Permalink to this definition"></a></dt>
<dd><p>Transform the sankey_mapping dictionary to a specific dictionary format suitable for creating Sankey diagrams.</p>
<p>Parameters:
- sankey_mapping (Dict): A dictionary defining Sankey diagram attributes.</p>
<p>Returns:
- Dict: Transformed dictionary in the required format.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pages.presentation_display.update_sankey_consumption">
<span class="sig-prename descclassname"><span class="pre">pages.presentation_display.</span></span><span class="sig-name descname"><span class="pre">update_sankey_consumption</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sankey_mapping</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'kWh'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/pages/presentation_display.html#update_sankey_consumption"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pages.presentation_display.update_sankey_consumption" title="Permalink to this definition"></a></dt>
<dd><p>Updates the ‘Consumption’ fields in sankey_mapping using data from an external data interface.
Allows for mathematical expressions and conditions within the ‘Consumption’ fields.
Converts the unit of the consumption value to a specified unit (default is “kWh”).</p>
<p>Parameters:
- sankey_mapping (dict): A dictionary defining Sankey diagram attributes.
- frequency (str): The frequency of the time index in the DataFrame.
- unit (str, optional): The desired output unit for the consumption values. Default is “kWh”.</p>
<p>Returns:
- dict: Updated sankey_mapping with ‘Consumption’ values filled and converted to the specified unit.</p>
</dd></dl>

<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules/modules.html">System Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modules/modules.html#module-pages.modules._module_functions">module_functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules/modules.html#module-pages.modules._module_template">module_template</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules/modules.html#module-pages.modules.Heat_pump_module">Heat Pump Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules/modules.html#pv-module">PV Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules/modules.html#module-pages.modules.Battery_module">Battery_module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules/modules.html#module-pages.modules.E_consumer_module">E_consumer_module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules/modules.html#module-pages.modules.Floors_module">Floors_module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules/modules.html#module-pages.modules.Ventilation_system_and_heating_pumps_module">Ventilation_system_and_heating_pumps_module</a></li>
</ul>
</li>
</ul>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="modules.html" class="btn btn-neutral float-left" title="Energy_monitor Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="modules/modules.html" class="btn btn-neutral float-right" title="System Modules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Julian W..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>